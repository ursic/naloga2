<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:t="http://myfaces.apache.org/tomahawk">
  <h:head>
    <f:view locale="si">
      <title>#{lang['task2']}</title>
    </f:view>
    <link href="./css/naloga2.css" rel="stylesheet" type="text/css" />
  </h:head>
  <script type="text/javascript" src="./js/jquery-2.0.3.min.js"></script>
  <h:body>
    <f:view locale="si">
      <h2><a href="/">#{lang['list']}</a></h2>
      <h:panelGroup rendered="#{!naloga2.isDataValid}">
        <h4>#{lang['file_error']}</h4>
      </h:panelGroup>

      <h:form rendered="#{naloga2.isDataValid}">
        #{lang['num_vehicles']}: #{naloga2.numVehicles}

        <h:dataTable value="#{naloga2.vehicles}" var="vehicle"
                     styleClass="employeeTable"
                     headerClass="employeeTableHeader"
                     rowClasses="employeeTableOddRow,employeeTableEvenRow"
                     columnClasses="checkBox,dbState,colMiddle,colMiddle,colMiddle,colMiddle,colPrice">
          <h:column headerClass="employeeTableHeader selectHeader">
            <f:facet name="header"><h:selectBooleanCheckbox name="selectAll" id="selectAll" /></f:facet>
            <h:selectBooleanCheckbox
               name="select"
               rendered="#{!naloga2.vehiclesInDb[vehicle.hash]}"
               value="#{naloga2.checkedVehicles[vehicle.hash]}" />
          </h:column>
          <h:column headerClass="employeeTableHeader dbHeader">
            <f:facet name="header">#{lang['in_database']}</f:facet>
            <h:outputText value="#{lang['yes']}" rendered="#{naloga2.vehiclesInDb[vehicle.hash]}" />
            <h:outputText value="#{lang['no']}" rendered="#{!naloga2.vehiclesInDb[vehicle.hash]}" />
          </h:column>
          <h:column headerClass="employeeTableHeader yearHeader headerMiddle">
            <f:facet name="header">#{lang['year']}</f:facet>
            #{vehicle.year}
          </h:column>
          <h:column headerClass="employeeTableHeader headerMiddle">
            <f:facet name="header">#{lang['make']}</f:facet>
            #{vehicle.make}
          </h:column>
          <h:column headerClass="employeeTableHeader headerMiddle">
            <f:facet name="header">#{lang['model']}</f:facet>
            #{vehicle.model}
          </h:column>
          <h:column headerClass="employeeTableHeader headerMiddle">
            <f:facet name="header">#{lang['comment']}</f:facet>
            #{vehicle.comment}
          </h:column>
          <h:column headerClass="employeeTableHeader headerMiddle">
            <f:facet name="header">#{lang['price']}</f:facet>
            <h:outputText value="#{vehicle.price}">
              <f:convertNumber pattern="0.00" />
            </h:outputText>
          </h:column>
        </h:dataTable>
        <h:commandButton value="#{lang['store']}" action="#{naloga2.storeVehicles}" styleClass="storeButton" />
        <h:commandButton value="#{lang['empty_database']}" action="#{naloga2.removeVehicles}" styleClass="emptyButton" />
      </h:form>

      <h:form enctype="multipart/form-data" styleClass="uploadForm">
        <t:inputFileUpload value="#{naloga2.uploadedFile}" />
        <h:commandButton value="#{lang['upload']}" action="#{naloga2.upload}"/>
      </h:form>

    </f:view>
    <script type="text/javascript" src="./js/naloga2.js"></script>
  </h:body>
</html>
